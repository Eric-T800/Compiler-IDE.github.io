
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compiler IDE</title>
    <meta name="description" content="Compiler IDE是一个在线编译器，支持C++语言，提供在线编译、调试等功能">
    <meta name="keywords" content="Compiler, IDE, 编译器, 调试">

    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">

    <script src="https://statics.mywwzh.top/js/tailwindcss.js"></script>
    <link rel="stylesheet" href="https://statics.mywwzh.top/css/all.min.css">
    <link rel="stylesheet" href="https://statics.mywwzh.top/css/github.min.css">
    <script src="https://statics.mywwzh.top/js/highlight.min.js"></script>
    
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .code-bg {
            background: linear-gradient(45deg, #2d3748 0%, #1a202c 100%);
        }
        .feature-card {
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
        }
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        /* Logo样式 */
        .logo-container {
            position: relative;
            overflow: hidden;
            background: transparent !important;
        }
        .logo-container.has-image {
            background: transparent !important;
        }
        .logo-container.no-image {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        }
        .logo-container img {
            position: relative;
            z-index: 2;
            display: block;
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .bounce-animation {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .typing-animation {
            overflow: hidden;
            border-right: .15em solid #667eea;
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
        }
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #667eea; }
        }
        .nav-fixed {
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <nav id="navbar" class="fixed top-0 w-full z-50 transition-all duration-300">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <span class="text-2xl font-bold text-gray-800">Compiler IDE</span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#features" class="text-gray-600 hover:text-blue-600 transition duration-300">特色功能</a>
                    <a href="#changelog" class="text-gray-600 hover:text-blue-600 transition duration-300">更新日志</a>
                    <a href="#download" class="text-gray-600 hover:text-blue-600 transition duration-300">下载</a>
                    <a href="#about" class="text-gray-600 hover:text-blue-600 transition duration-300">关于我</a>
                </div>
                
                <div class="flex items-center space-x-4">
                    <a href="#download" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-300">
                        <i class="fas fa-download mr-2"></i>下载最新版
                    </a>
                    <button id="mobile-menu" class="md:hidden text-gray-600" title="打开菜单">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <section class="gradient-bg text-white pt-24 pb-20">
        <div class="container mx-auto px-6 text-center">
            <div class="max-w-4xl mx-auto">
                <h1 class="text-5xl md:text-7xl font-bold mb-8 fade-in">
                    Compiler IDE
                </h1>
                <div class="text-xl md:text-2xl mb-8 typing-animation fade-in">
                    在线高级编译器
                </div>
                <p class="text-lg md:text-xl mb-12 opacity-90 fade-in">
                    有编译、调式、运行等功能<br>
                    让你更高效的写代码
                </p>
                
                <div class="flex flex-col sm:flex-row justify-center gap-4 mb-16 fade-in">
                    <a href="#download" class="bg-white text-blue-600 px-8 py-4 rounded-lg font-semibold hover:bg-gray-100 transition duration-300 shadow-lg download-btn">
                        <i class="fas fa-download mr-2"></i>立即下载
                    </a>
                    <a href="#features" class="border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition duration-300">
                        <i class="fas fa-rocket mr-2"></i>探索功能
                    </a>
                </div>
                
                <div class="bounce-animation">
                    <i class="fas fa-chevron-down text-3xl opacity-70"></i>
                </div>
            </div>
        </div>
    </section>

    <section id="features" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16 fade-in">
                <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">强大的特色功能</h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Compiler IDE 专门为信息学竞赛选手设计，提供一系列专业工具
                </p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="feature-card bg-white rounded-xl p-8 text-center fade-in">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-cloud text-blue-600 text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">代码存储</h3>
                    <p class="text-gray-600 leading-relaxed">
                        安全可靠的代码存储。
                    </p>
                </div>

                <div class="feature-card bg-white rounded-xl p-8 text-center fade-in">
                    <div class="w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-cogs text-indigo-600 text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">编译运行</h3>
                    <p class="text-gray-600 leading-relaxed">
                        一键编译运行，支持最新的 C++23，内置调试功能。
                    </p>
                </div>

                <div class="feature-card bg-white rounded-xl p-8 text-center fade-in">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-balance-scale text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">SOLO 模式</h3>
                    <p class="text-gray-600 leading-relaxed">
                        SOLO 模式集成包括 IDE 在内的多种工具，让你更高效地写代码。
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section id="changelog" class="py-20 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16 fade-in">
                <h2 class="text-4xl font-bold text-gray-800 mb-6">更新日志</h2>
                <p class="text-xl text-gray-600">
                    持续改进，为大家提供更好的体验
                </p>
            </div>
            
            <div class="max-w-4xl mx-auto">
                <div id="changelog-content">
                    <div class="bg-white rounded-xl shadow-lg p-8 fade-in">
                        <div class="text-center text-gray-500">
                             <a href="/changelogs.html" class="text-blue-600 hover:underline">点击此处查看所有更新日志</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="download" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16 fade-in">
                <h2 class="text-4xl font-bold text-gray-800 mb-6">立即下载</h2>
                <p class="text-xl text-gray-600">
                    免费下载 Compiler IDE，开启高效的 OI 之旅
                </p>
            </div>
            
            <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-8 border-2 border-blue-200 fade-in">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fab fa-windows text-white text-2xl"></i>

                        </div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-2">Windows 版本</h3>
                        <p class="text-gray-600">支持 Windows 10/11 (64位)</p>
                    </div>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-center text-gray-700">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span id="download-size">完整安装包</span>
                        </div>
                        <div class="flex items-center text-gray-700">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span>桌面快捷方式</span>
                        </div>
                    </div>
                    
                    <button id="download-btn" class="w-full bg-blue-600 text-white py-4 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 shadow-lg download-btn">
                        <i class="fas fa-download mr-2"></i>下载最新版
                    </button>
                </div>
                <div id="system-requirements" class="bg-gray-50 rounded-xl p-8 fade-in">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">系统要求</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">最低配置</h4>
                            <ul id="minimum-requirements" class="text-gray-600 space-y-1">
                                <li>• Windows 10 (64位) 或更高版本</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">推荐配置</h4>
                            <ul id="recommended-requirements" class="text-gray-600 space-y-1">
                                <li>• Windows 11 (64位)</li>
                            </ul>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>

    <section id="about" class="py-20 bg-gray-900 text-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16 fade-in">
                <h2 class="text-4xl font-bold mb-6">关于我</h2>
                <p class="text-xl opacity-90">
                    致力于为信息学竞赛选手提供更好的开发工具
                </p>
            </div>
            
            <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-12">
                <!-- Mission -->
                <div class="fade-in">
                    <h3 class="text-2xl font-bold mb-6">起源</h3>
                    <p class="text-gray-300 leading-relaxed mb-6">
                        Compiler IDE 由 Eric1030 开发。
                    </p>
                    <p class="text-gray-300 leading-relaxed mb-6">
                        从代码编写到性能调优，从算法验证到调试测试，我们提供全方位的开发支持，
                        助您高效构建程序，专注于深化编程逻辑与技能突破。
                    </p>
                    
                    <div class="grid grid-cols-2 gap-4 mt-8">
                        <div class="text-center">
                            <div class="text-3xl font-bold text-blue-400">0</div>
                            <div class="text-gray-400 text-sm">累计用户</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-green-400">98%</div>
                            <div class="text-gray-400 text-sm">运行稳定性</div>
                        </div>
                    </div>
                </div>
                
                    <div class="mt-8 p-6 bg-gray-800 rounded-lg">
                        <h4 class="font-semibold mb-3">联系我</h4>
                        <div class="space-y-2 text-sm text-gray-300">
                            <div class="flex items-center">
                                <i class="fas fa-envelope mr-2 text-blue-400"></i>
                                <span>Eric2013_jz@163.com</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="logo-container w-10 h-10 rounded-lg flex items-center justify-center p-1">
                            
                        </div>
                        <span class="text-xl font-bold">Compiler IDE</span>
                    </div>
                    <p class="text-gray-400 leading-relaxed">
                        专为信息学竞赛选手打造的编译器，让编程更高效。
                    </p>
                </div>

                <div>
                    <h4 class="font-semibold mb-4">产品</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#features" class="hover:text-white transition duration-300">功能特性</a></li>
                        <li><a href="#download" class="hover:text-white transition duration-300">下载</a></li>
                        <li><a href="#changelog" class="hover:text-white transition duration-300">更新日志</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">支持</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#about" class="hover:text-white transition duration-300">关于我</a></li>
                        <li><a href="#features" class="hover:text-white transition duration-300">功能介绍</a></li>
                        <li><a href="#changelog" class="hover:text-white transition duration-300">版本历史</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-12 pt-8 text-center text-gray-400">
                <p>&copy; 2025 Eric1030. 保留所有权利. | 版本 v1.0.0 Beta3</p>
            </div>
        </div>
    </footer>

    <!-- Mobile Menu -->
    <div id="mobile-menu-panel" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="fixed right-0 top-0 h-full w-80 bg-white transform translate-x-full transition-transform duration-300">
            <div class="p-6">
                <div class="flex justify-between items-center mb-8">
                    <span class="text-xl font-bold text-gray-800">菜单</span>
                    <button id="close-mobile-menu" class="text-gray-600" title="关闭菜单">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <nav class="space-y-4">
                    <a href="#features" class="block py-3 text-gray-600 hover:text-blue-600 transition duration-300">特色功能</a>
                    <a href="#changelog" class="block py-3 text-gray-600 hover:text-blue-600 transition duration-300">更新日志</a>
                    <a href="#download" class="block py-3 text-gray-600 hover:text-blue-600 transition duration-300">下载</a>
                    <a href="#about" class="block py-3 text-gray-600 hover:text-blue-600 transition duration-300">关于我</a>
                </nav>
            </div>
        </div>
    </div>

    <script>
        let latestVersion = '';
        let changelogData = null;
        let allChangelogsData = null;
        let downloadInfo = null;

        async function loadLatestVersionInfo() {
            try {
                const versionResponse = await fetch('/api/checkUpdate');
                const versionData = await versionResponse.json();
                latestVersion = versionData.latestVersion;
                               const downloadResponse = await fetch(`/api/getUpdateFilelist?version=${latestVersion}`);
                const downloadData = await downloadResponse.json();
                // 转换为兼容的格式
                downloadInfo = {
                    version: latestVersion,
                    filename: downloadData.files && downloadData.files.length > 0 ? downloadData.files[0].name : `OICPP-${latestVersion}-Setup.exe`,
                    size_mb: downloadData.totalSizeMB || 0,
                    system_requirements: "Windows 10/11 (64-bit)",
                    downloadUrl: downloadData.files && downloadData.files.length > 0 ? downloadData.files[0].downloadUrl : null
                };
                
                const changelogResponse = await fetch('/api/getLatestChangeLog');
                changelogData = await changelogResponse.json();
                
                const allChangelogsResponse = await fetch('/api/getAllChangeLogs');
                allChangelogsData = await allChangelogsResponse.json();
                
                updatePageContent();
            } catch (error) {
                console.error('Failed to load version info:', error);
                updatePageContent();
            }
        }

        function updatePageContent() {
            document.querySelectorAll('.version-display').forEach(el => {
                el.textContent = `v${latestVersion}`;
            });

            const downloadBtns = document.querySelectorAll('.download-btn');
            downloadBtns.forEach(btn => {
                btn.innerHTML = `<i class="fas fa-download mr-2"></i>下载最新版`;
            });

            if (downloadInfo && downloadInfo.size_mb) {
                const downloadSizeEl = document.getElementById('download-size');
                if (downloadSizeEl) {
                    downloadSizeEl.textContent = `完整安装包 (~${downloadInfo.size_mb}MB)`;
                }
            }

            if (allChangelogsData && allChangelogsData.versions) {
                updateChangelogSection();
            }

            if (downloadInfo && downloadInfo.system_requirements) {
                updateSystemRequirements();
            }
        }

        function updateChangelogSection() {
            const changelogContainer = document.getElementById('changelog-content');
            if (!changelogContainer || !allChangelogsData || !allChangelogsData.versions) return;

            let changelogHTML = '';

            const versionsToShow = allChangelogsData.versions.slice(0, 2);
            versionsToShow.forEach((version, index) => {
                let sectionsHTML = '';
                const content = version.content || '';
                const contentLines = content.split('\n').filter(line => line.trim() !== '');

                if (contentLines.length > 0) {
                    sectionsHTML = `
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-3">
                                <i class="fas fa-list-alt mr-2"></i>更新详情
                            </h4>
                            <ul class="text-gray-600 space-y-2">
                                ${contentLines.map(line => `<li>• ${line}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                } else {
                    sectionsHTML = `
                        <div class="text-center text-gray-500">
                            <i class="fas fa-info-circle text-2xl mb-2"></i>
                            <p>本版本暂无详细更新说明</p>
                        </div>
                    `;
                }

                const getVersionType = (versionString) => {
                    if (versionString.includes('alpha')) return 'alpha';
                    if (versionString.includes('beta')) return 'beta';
                    if (versionString.includes('rc')) return 'rc';
                    if (versionString.includes('stable')) return 'stable';
                    return 'release';
                };

                const getVersionTypeStyle = (type) => {
                    switch (type) {
                        case 'alpha':
                            return 'bg-orange-100 text-orange-600 border-orange-200';
                        case 'beta':
                            return 'bg-blue-100 text-blue-600 border-blue-200';
                        case 'stable':
                            return 'bg-green-100 text-green-600 border-green-200';
                        case 'rc':
                            return 'bg-purple-100 text-purple-600 border-purple-200';
                        default:
                            return 'bg-gray-100 text-gray-600 border-gray-200';
                    }
                };

                const getVersionTypeIcon = (type) => {
                    switch (type) {
                        case 'alpha':
                            return 'fas fa-flask';
                        case 'beta':
                            return 'fas fa-cog';
                        case 'stable':
                            return 'fas fa-check-circle';
                        case 'rc':
                            return 'fas fa-star';
                        default:
                            return 'fas fa-code';
                    }
                };

                const versionType = getVersionType(version.version.toLowerCase());
                const versionTypeStyle = getVersionTypeStyle(versionType);
                const versionTypeIcon = getVersionTypeIcon(versionType);
                const isLatest = index === 0; // Assuming the first version is the latest

                changelogHTML += `
                    <div class="bg-white rounded-xl shadow-lg p-8 fade-in visible ${isLatest ? 'border-2 border-blue-200' : ''}" style="margin-bottom: 2rem;">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center">
                                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                                    <i class="${versionTypeIcon} text-blue-600 text-xl"></i>
                                </div>
                                <div>
                                    <div class="flex items-center gap-3">
                                        <h3 class="text-2xl font-bold text-gray-800">v${version.version}</h3>
                                        ${isLatest ? '<span class="bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-sm font-medium border border-blue-200">最新版本</span>' : ''}
                                    </div>
                                    <div class="flex items-center gap-3 mt-1">
                                        <p class="text-gray-500">${version.release_date}</p>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium border ${versionTypeStyle}">
                                            ${versionType.toUpperCase()}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid gap-6" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
                            ${sectionsHTML}
                        </div>
                    </div>
                `;
            });

            if (!changelogHTML) {
                changelogHTML = `
                    <div class="bg-white rounded-xl shadow-lg p-8 fade-in visible">
                        <div class="text-center text-gray-500">
                            <i class="fas fa-info-circle text-4xl mb-4"></i>
                            <p>暂无更新日志内容</p>
                        </div>
                    </div>
                `;
            }
            
            changelogContainer.innerHTML = changelogHTML;
        }
        
        function updateSystemRequirements() {
            if (!downloadInfo || !downloadInfo.system_requirements) return;
            
            const minimumEl = document.getElementById('minimum-requirements');
            const recommendedEl = document.getElementById('recommended-requirements');
            
            if (minimumEl && downloadInfo.system_requirements.minimum) {
                const minimum = downloadInfo.system_requirements.minimum;
                minimumEl.innerHTML = `
                    <li>• ${minimum.os}</li>
                    <li>• ${minimum.ram}</li>
                    <li>• ${minimum.disk}</li>
                    ${minimum.framework ? `<li>• ${minimum.framework}</li>` : ''}
                `;
            }
            
            if (recommendedEl && downloadInfo.system_requirements.recommended) {
                const recommended = downloadInfo.system_requirements.recommended;
                recommendedEl.innerHTML = `
                    <li>• ${recommended.os}</li>
                    <li>• ${recommended.ram}</li>
                    <li>• ${recommended.disk}</li>
                    ${recommended.storage ? `<li>• ${recommended.storage}</li>` : ''}
                `;
            }
        }

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('nav-fixed');
            } else {
                navbar.classList.remove('nav-fixed');
            }
        });

        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        const mobileMenuBtn = document.getElementById('mobile-menu');
        const mobileMenuPanel = document.getElementById('mobile-menu-panel');
        const closeMobileMenu = document.getElementById('close-mobile-menu');
        const mobileMenuContent = mobileMenuPanel.querySelector('div.fixed');

        mobileMenuBtn.addEventListener('click', function() {
            mobileMenuPanel.classList.remove('hidden');
            setTimeout(() => {
                mobileMenuContent.classList.remove('translate-x-full');
            }, 10);
        });

        function closeMobileMenuPanel() {
            mobileMenuContent.classList.add('translate-x-full');
            setTimeout(() => {
                mobileMenuPanel.classList.add('hidden');
            }, 300);
        }

        closeMobileMenu.addEventListener('click', closeMobileMenuPanel);
        mobileMenuPanel.addEventListener('click', function(e) {
            if (e.target === mobileMenuPanel) {
                closeMobileMenuPanel();
            }
        });

        document.getElementById('download-btn').addEventListener('click', function() {
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>准备下载...';
            this.disabled = true;
            
            setTimeout(() => {
                let downloadUrl;
                if (downloadInfo && downloadInfo.downloadUrl) {
                    downloadUrl = downloadInfo.downloadUrl;
                } else {
                    const filename = downloadInfo ? downloadInfo.filename : `CompilerCPP-${latestVersion}-Setup.exe`;
                    downloadUrl = `/api/downloadUpdateFile?version=${latestVersion}&filename=${filename}`;
                }
                window.open(downloadUrl, '_blank');
                
                this.innerHTML = `<i class="fas fa-download mr-2"></i>下载最新版`;
                this.disabled = false;
            }, 2000);
        });

        document.addEventListener('DOMContentLoaded', function() {
            loadLatestVersionInfo();
            setTimeout(initializeLogos, 500);
            
            if (typeof hljs !== 'undefined') {
                hljs.highlightAll();
            }
        });

        function initializeLogos() {
            const logoContainers = document.querySelectorAll('.logo-container');
                logoContainers.forEach((container, index) => {
                const img = container.querySelector('img');
                if (img) {
                    img.onload = function() {
                        container.classList.add('has-image');
                        container.classList.remove('no-image');
                    };
                    
                    img.onerror = function() {
                        container.classList.add('no-image');
                        container.classList.remove('has-image');
                        container.innerHTML = '<span style="color: white; font-weight: bold; font-size: 1.2rem;">O</span>';
                    };
                    
                    if (img.complete) {
                        if (img.naturalWidth > 0) {
                            img.onload();
                        } else {
                            img.onerror();
                        }
                    }
                } else {
                }
            });
        }

        setInterval(() => {
            const heroSection = document.querySelector('.bounce-animation');
            if (heroSection && window.scrollY === 0) {
                heroSection.style.transform = 'translateY(10px)';
                setTimeout(() => {
                    heroSection.style.transform = 'translateY(0)';
                }, 500);
            }
        }, 3000);
    </script>
</body>
</html>
